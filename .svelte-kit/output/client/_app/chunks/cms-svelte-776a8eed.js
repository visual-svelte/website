import{S as ve,i as be,s as ye,_ as de,$ as pe,a as y,d as c,b as v,g as z,e as S,t as P,k as U,c as F,h as D,m as M,L as Qe,F as n,j as ge,H as fe,I as Ne,b2 as Ke,J as Dt,am as gt,ag as vt,b3 as $e,R as Be,a8 as Le,ah as bt,w as yt,x as wt,y as kt,q as se,o as ue,B as It,n as we,p as ke,b4 as Fe,l as Se,G as ie,Y as Ce,b5 as At,b6 as Bt,f as me,b7 as Te,b8 as Pe,b9 as De,ba as Lt,bb as Ue,N as Me,bc as Oe,bd as Ve,be as qe,bf as Nt,bg as Ct,bh as Ut,ai as Mt,Q as xe}from"./vendor-95c30d18.js";import{S as Ot}from"./ScrollyWrapper-9bf6e10d.js";import{F as Vt}from"./FormattedExample-9b8b48af.js";function et(r,e,t){const a=r.slice();return a[13]=e[t],a[15]=t,a}function tt(r){let e,t,a,u,p,i,h,l;return{c(){e=de("rect"),this.h()},l(o){e=pe(o,"rect",{x:!0,y:!0,height:!0,width:!0,class:!0,fill:!0,"fill-opacity":!0,"stroke-width":!0,stroke:!0}),y(e).forEach(c),this.h()},h(){v(e,"x",t=r[2].bandwidth()+r[2](r[6][r[15]])),v(e,"y",a=r[3]-r[4](r[13])),v(e,"height",u=r[4](r[13])),v(e,"width",p=r[2].bandwidth()),v(e,"class","bar"),v(e,"fill",i=r[7][r[15]]),v(e,"fill-opacity",h=r[0]>2?r[15]+3==r[0]?1:.2:1),v(e,"stroke-width","2"),v(e,"stroke",l=r[0]>2&&r[15]+3==r[0]?"yellow":"transparent")},m(o,d){z(o,e,d)},p(o,d){d&4&&t!==(t=o[2].bandwidth()+o[2](o[6][o[15]]))&&v(e,"x",t),d&56&&a!==(a=o[3]-o[4](o[13]))&&v(e,"y",a),d&48&&u!==(u=o[4](o[13]))&&v(e,"height",u),d&4&&p!==(p=o[2].bandwidth())&&v(e,"width",p),d&1&&h!==(h=o[0]>2?o[15]+3==o[0]?1:.2:1)&&v(e,"fill-opacity",h),d&1&&l!==(l=o[0]>2&&o[15]+3==o[0]?"yellow":"transparent")&&v(e,"stroke",l)},d(o){o&&c(e)}}}function qt(r){let e,t,a,u=r[0]==0?"Jan-2020":r[0]===1?"Feb-2020":"Mar-2020",p,i,h,l,o,d=r[5],_=[];for(let s=0;s<d.length;s+=1)_[s]=tt(et(r,d,s));return{c(){e=S("p"),t=P("Monthly sales of Fruit in "),a=S("span"),p=P(u),i=U(),h=de("svg"),l=de("g");for(let s=0;s<_.length;s+=1)_[s].c();this.h()},l(s){e=F(s,"P",{});var f=y(e);t=D(f,"Monthly sales of Fruit in "),a=F(f,"SPAN",{});var m=y(a);p=D(m,u),m.forEach(c),f.forEach(c),i=M(s),h=pe(s,"svg",{width:!0,height:!0});var N=y(h);l=pe(N,"g",{class:!0,transform:!0}),y(l).forEach(c);for(let B=0;B<_.length;B+=1)_[B].l(N);N.forEach(c),this.h()},h(){v(l,"class","xAxis"),v(l,"transform",o="translate("+r[2].bandwidth()+","+r[3]+")"),Qe(l,"titled",r[0]>2),v(h,"width",St),v(h,"height",Et)},m(s,f){z(s,e,f),n(e,t),n(e,a),n(a,p),z(s,i,f),z(s,h,f),n(h,l),r[10](l);for(let m=0;m<_.length;m+=1)_[m].m(h,null)},p(s,[f]){if(f&1&&u!==(u=s[0]==0?"Jan-2020":s[0]===1?"Feb-2020":"Mar-2020")&&ge(p,u),f&12&&o!==(o="translate("+s[2].bandwidth()+","+s[3]+")")&&v(l,"transform",o),f&1&&Qe(l,"titled",s[0]>2),f&253){d=s[5];let m;for(m=0;m<d.length;m+=1){const N=et(s,d,m);_[m]?_[m].p(N,f):(_[m]=tt(N),_[m].c(),_[m].m(h,null))}for(;m<_.length;m+=1)_[m].d(1);_.length=d.length}},i:fe,o:fe,d(s){s&&c(e),s&&c(i),s&&c(h),r[10](null),Ne(_,s)}}}let lt=30,Et=300,St=400;function Rt(r,e,t){let a,u,p,i,h,{value:l}=e,o,d=[{0:[700,39,340,600]},{1:[200,400,600,800]},{2:[300,200,900,20]},{3:[300,200,900,20]},{4:[300,200,900,20]},{5:[300,200,900,20]},{6:[300,200,900,20]}],_=["Apple","Banana","Cherry","Donut"],s=["#003b49","#d3273e","#dc582a","#5d3754"];const f=Ke(d.find(B=>B[l])[l],{duration:400,easing:$e});Dt(r,f,B=>t(5,h=B));const m=Ke(0,{duration:400,easing:$e});function N(B){Be[B?"unshift":"push"](()=>{o=B,t(1,o)})}return r.$$set=B=>{"value"in B&&t(0,l=B.value)},r.$$.update=()=>{r.$$.dirty&1&&f.set(d.find(B=>B[l])[l]),r.$$.dirty&1&&m.set(l>2?90:0),r.$$.dirty&8&&t(2,p=gt().domain(_).range([0,a]).padding([.1])),r.$$.dirty&8&&t(4,i=vt().domain([0,1e3]).range([a,0])),r.$$.dirty&518&&o&&Le(o).call(bt(p).ticks(u/60))},t(3,a=Et-lt*2),t(9,u=St-lt*2),[l,o,p,a,i,h,_,s,f,u,N]}class Gt extends ve{constructor(e){super();be(this,e,Rt,qt,ye,{value:0})}}const at=[{attention:["VISUALIZING DATA CHANGES: we start with a simple bar chart (minimal styling on this one to focus on the functionality!). We're visualizing the data for Jan-2020 currently, but what if we next wanted to show the data for Feb-2020? ","The animation is triggered by the Scrolly 'value'. On the data change, a simple Svelte tween tweens between the old and the new values (for each bar).","To bring a closer connection between the bars and the textual descriptions scrolling past, you can add some custom styling to the categories. For example, we can see the <span style='background-color:#5d3754;padding:2px 5px;border-radius:5px; color: white'>Donut</span> sales here far outweighed those of the humble <span style='background-color:#dc582a;padding:2px 5px;border-radius:5px; color: white' class='cat cherry'>cherry</span>.","We can also go one step further to really focus on just one of the bars and explain in in the must greater depth. ","This is achieved through use of the ternary operator on the Rect styling. "]},{behaviour:["This is number one","This is number one","This is number one","This is number one","This is number one","This is number one"]}];function Ht(r){let e,t,a,u,p,i,h,l,o,d,_,s,f,m,N,B,T,G,Z,W,A,q,ee,C,H,Y,J,X,Q,te,g,k,R,K,L,le,O,w,j,I,b,E,re,he,ne,ce,ae;return I=new Ot({props:{fixPosition:"left",data:r[0],fixedComp:Gt}}),{c(){e=S("div"),t=S("h2"),a=P("Motivation"),u=U(),p=S("p"),i=P(`Scrollytelling is a go-to technique for visual journalists and so let's\r
    learn to implement it properly, using Svelte!`),h=U(),l=S("p"),o=P(`By scrollytelling, I mean an interactive article that updates automatically\r
    as the user scrolls down (or across?) the page. You can see an example from\r
    my previous article on `),d=S("a"),_=P("Animated Transitions between Chart Types"),s=P("."),f=U(),m=S("h2"),N=P("The good news"),B=U(),T=S("p"),G=P(`Good news, part 1: Implmenting Scrollytelling in Svelte is a piece of cake\r
    (or Pudding?), thanks to the team at `),Z=S("a"),W=P("Pudding.cool"),A=P(`\r
    who have made a simple implementation available through their\r
    `),q=S("a"),ee=P("Svelte project starter kit"),C=P(". Thanks Pudding team!"),H=U(),Y=S("p"),J=P("Good news part 2: Connor Rothschild has already posted "),X=S("a"),Q=P("this great post"),te=P(" detailing how to implement the Pudding Scrolly component."),g=U(),k=S("p"),R=P(`If you haven't already, now is probably a good time to read those two\r
    resources to get a good understanding of how it works. In this article, I\r
    will instead be providing many creative examples of how to extend the basic\r
    usage of the Scrolly component. Let's dive into it!`),K=U(),L=S("h2"),le=P("First Demo - data changes and focusing"),O=U(),w=S("p"),j=U(),yt(I.$$.fragment),b=U(),E=S("h2"),re=P("Future additions"),he=U(),ne=S("p"),ce=P(`I hope you found a few of those techniques useful. I will now publish the\r
    article, but in the future I hope to add the following features: zooming\r
    around a map, customing scroll behaviour (e.g. scroll snap, or horizontal\r
    scrolling), and much more on accessible scrollytelling.`),this.h()},l($){e=F($,"DIV",{class:!0});var V=y(e);t=F(V,"H2",{});var x=y(t);a=D(x,"Motivation"),x.forEach(c),u=M(V),p=F(V,"P",{});var Re=y(p);i=D(Re,`Scrollytelling is a go-to technique for visual journalists and so let's\r
    learn to implement it properly, using Svelte!`),Re.forEach(c),h=M(V),l=F(V,"P",{});var Ie=y(l);o=D(Ie,`By scrollytelling, I mean an interactive article that updates automatically\r
    as the user scrolls down (or across?) the page. You can see an example from\r
    my previous article on `),d=F(Ie,"A",{rel:!0,href:!0});var Ge=y(d);_=D(Ge,"Animated Transitions between Chart Types"),Ge.forEach(c),s=D(Ie,"."),Ie.forEach(c),f=M(V),m=F(V,"H2",{});var He=y(m);N=D(He,"The good news"),He.forEach(c),B=M(V),T=F(V,"P",{});var _e=y(T);G=D(_e,`Good news, part 1: Implmenting Scrollytelling in Svelte is a piece of cake\r
    (or Pudding?), thanks to the team at `),Z=F(_e,"A",{rel:!0,href:!0});var je=y(Z);W=D(je,"Pudding.cool"),je.forEach(c),A=D(_e,`\r
    who have made a simple implementation available through their\r
    `),q=F(_e,"A",{rel:!0,href:!0});var ze=y(q);ee=D(ze,"Svelte project starter kit"),ze.forEach(c),C=D(_e,". Thanks Pudding team!"),_e.forEach(c),H=M(V),Y=F(V,"P",{});var Ee=y(Y);J=D(Ee,"Good news part 2: Connor Rothschild has already posted "),X=F(Ee,"A",{rel:!0,href:!0});var Ze=y(X);Q=D(Ze,"this great post"),Ze.forEach(c),te=D(Ee," detailing how to implement the Pudding Scrolly component."),Ee.forEach(c),g=M(V),k=F(V,"P",{});var Ye=y(k);R=D(Ye,`If you haven't already, now is probably a good time to read those two\r
    resources to get a good understanding of how it works. In this article, I\r
    will instead be providing many creative examples of how to extend the basic\r
    usage of the Scrolly component. Let's dive into it!`),Ye.forEach(c),K=M(V),L=F(V,"H2",{});var We=y(L);le=D(We,"First Demo - data changes and focusing"),We.forEach(c),O=M(V),w=F(V,"P",{});var Pt=y(w);Pt.forEach(c),j=M(V),wt(I.$$.fragment,V),b=M(V),E=F(V,"H2",{});var Xe=y(E);re=D(Xe,"Future additions"),Xe.forEach(c),he=M(V),ne=F(V,"P",{});var Je=y(ne);ce=D(Je,`I hope you found a few of those techniques useful. I will now publish the\r
    article, but in the future I hope to add the following features: zooming\r
    around a map, customing scroll behaviour (e.g. scroll snap, or horizontal\r
    scrolling), and much more on accessible scrollytelling.`),Je.forEach(c),V.forEach(c),this.h()},h(){v(d,"rel","internal"),v(d,"href","/d3/recipes/animated-transitions"),v(Z,"rel","external"),v(Z,"href","https://pudding.cool"),v(q,"rel","external"),v(q,"href","https://github.com/the-pudding/svelte-starter/blob/main/src/components/helpers/Scrolly.svelte"),v(X,"rel","external"),v(X,"href","https://www.connorrothschild.com/post/svelte-scrollytelling"),v(e,"class","wrapper svelte-6ch1q8")},m($,V){z($,e,V),n(e,t),n(t,a),n(e,u),n(e,p),n(p,i),n(e,h),n(e,l),n(l,o),n(l,d),n(d,_),n(l,s),n(e,f),n(e,m),n(m,N),n(e,B),n(e,T),n(T,G),n(T,Z),n(Z,W),n(T,A),n(T,q),n(q,ee),n(T,C),n(e,H),n(e,Y),n(Y,J),n(Y,X),n(X,Q),n(Y,te),n(e,g),n(e,k),n(k,R),n(e,K),n(e,L),n(L,le),n(e,O),n(e,w),n(e,j),kt(I,e,null),n(e,b),n(e,E),n(E,re),n(e,he),n(e,ne),n(ne,ce),ae=!0},p($,[V]){const x={};V&1&&(x.data=$[0]),I.$set(x)},i($){ae||(se(I.$$.fragment,$),ae=!0)},o($){ue(I.$$.fragment,$),ae=!1},d($){$&&c(e),It(I)}}}function jt(r,e,t){let a;return t(0,a=at.find(u=>u.attention).attention),at.find(u=>u.behaviour).behaviour,[a]}class zt extends ve{constructor(e){super();be(this,e,jt,Ht,ye,{})}}function rt(r,e,t){const a=r.slice();return a[2]=e[t],a}function ot(r){let e,t;return e=new Vt({props:{comp:r[2],route:"svelte/flip/"}}),{c(){yt(e.$$.fragment)},l(a){wt(e.$$.fragment,a)},m(a,u){kt(e,a,u),t=!0},p:fe,i(a){t||(se(e.$$.fragment,a),t=!0)},o(a){ue(e.$$.fragment,a),t=!1},d(a){It(e,a)}}}function Zt(r){let e,t,a,u,p,i,h,l,o,d,_,s,f,m,N,B,T,G,Z,W,A,q,ee,C,H,Y,J,X,Q,te,g,k,R,K=r[0].components,L=[];for(let O=0;O<K.length;O+=1)L[O]=ot(rt(r,K,O));const le=O=>ue(L[O],1,1,()=>{L[O]=null});return{c(){e=S("div"),t=S("h2"),a=P("Firstly, what is FLIP and how can we use it?"),u=U(),p=S("p"),i=P(`FLIP is an animation technique which allows us to smoothly animate between\r
    the X and Y positions of DOM elements as there position changes (normally as\r
    a result of filtering or sorting operations).`),h=U(),l=S("p"),o=P(`It's an anagram; and if we remember the anagram it helps us understand how\r
    it works:`),d=U(),_=S("ul"),s=S("li"),f=P("First: the initial state of an element,"),m=U(),N=S("li"),B=P("Last: the final state of an element (after some UI change),"),T=U(),G=S("li"),Z=P(`Invert: calculates the transformation required to get from initial to\r
      final state,`),W=U(),A=S("li"),q=P("Play: run the transformation animation(s)."),ee=U(),C=S("h2"),H=P("Using FLIP for visual storytelling"),Y=U(),J=S("p"),X=P(`There are many articles about the fundamentals of how FLIP works in Svelte.\r
    The purpose of this article, however, is to think about some innovative uses\r
    of FLIP to help with visual storytelling.`),Q=U(),te=S("p"),g=P(`I've made 3 example components that might inspire you to use FLIP for your\r
    next visual essay.`),k=U();for(let O=0;O<L.length;O+=1)L[O].c();this.h()},l(O){e=F(O,"DIV",{class:!0});var w=y(e);t=F(w,"H2",{class:!0});var j=y(t);a=D(j,"Firstly, what is FLIP and how can we use it?"),j.forEach(c),u=M(w),p=F(w,"P",{});var I=y(p);i=D(I,`FLIP is an animation technique which allows us to smoothly animate between\r
    the X and Y positions of DOM elements as there position changes (normally as\r
    a result of filtering or sorting operations).`),I.forEach(c),h=M(w),l=F(w,"P",{});var b=y(l);o=D(b,`It's an anagram; and if we remember the anagram it helps us understand how\r
    it works:`),b.forEach(c),d=M(w),_=F(w,"UL",{});var E=y(_);s=F(E,"LI",{});var re=y(s);f=D(re,"First: the initial state of an element,"),re.forEach(c),m=M(E),N=F(E,"LI",{});var he=y(N);B=D(he,"Last: the final state of an element (after some UI change),"),he.forEach(c),T=M(E),G=F(E,"LI",{});var ne=y(G);Z=D(ne,`Invert: calculates the transformation required to get from initial to\r
      final state,`),ne.forEach(c),W=M(E),A=F(E,"LI",{});var ce=y(A);q=D(ce,"Play: run the transformation animation(s)."),ce.forEach(c),E.forEach(c),ee=M(w),C=F(w,"H2",{class:!0});var ae=y(C);H=D(ae,"Using FLIP for visual storytelling"),ae.forEach(c),Y=M(w),J=F(w,"P",{});var $=y(J);X=D($,`There are many articles about the fundamentals of how FLIP works in Svelte.\r
    The purpose of this article, however, is to think about some innovative uses\r
    of FLIP to help with visual storytelling.`),$.forEach(c),Q=M(w),te=F(w,"P",{});var V=y(te);g=D(V,`I've made 3 example components that might inspire you to use FLIP for your\r
    next visual essay.`),V.forEach(c),k=M(w);for(let x=0;x<L.length;x+=1)L[x].l(w);w.forEach(c),this.h()},h(){v(t,"class","svelte-1yieh0i"),v(C,"class","svelte-1yieh0i"),v(e,"class","wrapper svelte-1yieh0i")},m(O,w){z(O,e,w),n(e,t),n(t,a),n(e,u),n(e,p),n(p,i),n(e,h),n(e,l),n(l,o),n(e,d),n(e,_),n(_,s),n(s,f),n(_,m),n(_,N),n(N,B),n(_,T),n(_,G),n(G,Z),n(_,W),n(_,A),n(A,q),n(e,ee),n(e,C),n(C,H),n(e,Y),n(e,J),n(J,X),n(e,Q),n(e,te),n(te,g),n(e,k);for(let j=0;j<L.length;j+=1)L[j].m(e,null);R=!0},p(O,[w]){if(w&1){K=O[0].components;let j;for(j=0;j<K.length;j+=1){const I=rt(O,K,j);L[j]?(L[j].p(I,w),se(L[j],1)):(L[j]=ot(I),L[j].c(),se(L[j],1),L[j].m(e,null))}for(we(),j=K.length;j<L.length;j+=1)le(j);ke()}},i(O){if(!R){for(let w=0;w<K.length;w+=1)se(L[w]);R=!0}},o(O){L=L.filter(Boolean);for(let w=0;w<L.length;w+=1)ue(L[w]);R=!1},d(O){O&&c(e),Ne(L,O)}}}function Yt(r){const e=Ae==null?void 0:Ae.find(t=>t.primary_key=="Flip");return console.log("content",e),`${e==null?void 0:e.post_title}`,e==null||e.intro_text,e==null||e.keywords.join(),[e]}class Wt extends ve{constructor(e){super();be(this,e,Yt,Zt,ye,{})}}function nt(r,e,t){const a=r.slice();return a[5]=e[t],a[7]=t,a}function it(r){let e,t=[],a=new Map,u=r[0];const p=i=>i[5].id;for(let i=0;i<u.length;i+=1){let h=nt(r,u,i),l=p(h);a.set(l,t[i]=st(l,h))}return{c(){e=S("div");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=F(i,"DIV",{class:!0});var h=y(e);for(let l=0;l<t.length;l+=1)t[l].l(h);h.forEach(c),this.h()},h(){v(e,"class","grid svelte-1nzfzoz")},m(i,h){z(i,e,h);for(let l=0;l<t.length;l+=1)t[l].m(e,null)},p(i,h){if(h&5){u=i[0];for(let l=0;l<t.length;l+=1)t[l].r();t=Fe(t,h,p,1,i,u,a,e,Lt,st,null,nt);for(let l=0;l<t.length;l+=1)t[l].a()}},d(i){i&&c(e);for(let h=0;h<t.length;h+=1)t[h].d()}}}function st(r,e){let t,a,u=e[5].id+"",p,i,h,l=fe;return{key:r,first:null,c(){t=S("div"),a=S("div"),p=P(u),i=U(),this.h()},l(o){t=F(o,"DIV",{});var d=y(t);a=F(d,"DIV",{class:!0,style:!0});var _=y(a);p=D(_,u),_.forEach(c),i=M(d),d.forEach(c),this.h()},h(){v(a,"class","card  svelte-1nzfzoz"),me(a,"background-color",e[2](e[5].id)),this.first=t},m(o,d){z(o,t,d),n(t,a),n(a,p),n(t,i)},p(o,d){e=o,d&1&&u!==(u=e[5].id+"")&&ge(p,u),d&1&&me(a,"background-color",e[2](e[5].id))},r(){h=t.getBoundingClientRect()},f(){Te(t),l()},a(){l(),l=Pe(t,h,De,{duration:500})},d(o){o&&c(t)}}}function Xt(r){let e,t,a=r[1]?"9->0":"0->9",u,p,i,h,l,o,d,_,s=r[0]&&it(r);return{c(){e=S("button"),t=P("Sort "),u=P(a),p=U(),i=S("button"),h=P("Shuffle"),l=U(),s&&s.c(),o=Se()},l(f){e=F(f,"BUTTON",{});var m=y(e);t=D(m,"Sort "),u=D(m,a),m.forEach(c),p=M(f),i=F(f,"BUTTON",{});var N=y(i);h=D(N,"Shuffle"),N.forEach(c),l=M(f),s&&s.l(f),o=Se()},m(f,m){z(f,e,m),n(e,t),n(e,u),z(f,p,m),z(f,i,m),n(i,h),z(f,l,m),s&&s.m(f,m),z(f,o,m),d||(_=[ie(e,"click",r[4]),ie(i,"click",r[3])],d=!0)},p(f,[m]){m&2&&a!==(a=f[1]?"9->0":"0->9")&&ge(u,a),f[0]?s?s.p(f,m):(s=it(f),s.c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null)},i:fe,o:fe,d(f){f&&c(e),f&&c(p),f&&c(i),f&&c(l),s&&s.d(f),f&&c(o),d=!1,Ce(_)}}}function Jt(r,e,t){let a=[{id:0},{id:1},{id:2},{id:3},{id:4},{id:5},{id:6},{id:7},{id:8},{id:9}],u=At(Bt).domain([0,10]);function p(){let l=a.length,o;for(;l!=0;)o=Math.floor(Math.random()*l),l--,t(0,[a[l],a[o]]=[a[o],a[l]],a)}let i=!0;function h(){i?(t(0,a=a.sort((l,o)=>l.id<o.id?1:o.id<l.id?-1:0)),t(1,i=!i)):(t(0,a=a.sort((l,o)=>l.id>o.id?1:o.id>l.id?-1:0)),t(1,i=!i))}return[a,i,u,p,h]}class Qt extends ve{constructor(e){super();be(this,e,Jt,Xt,ye,{})}}function ht(r,e,t){const a=r.slice();return a[13]=e[t],a[15]=t,a}function ct(r,e,t){const a=r.slice();return a[16]=e[t],a[18]=t,a}function ut(r,e,t){const a=r.slice();return a[16]=e[t],a}function ft(r,e){let t,a,u,p,i=fe,h;return{key:r,first:null,c(){t=S("div"),this.h()},l(l){t=F(l,"DIV",{class:!0,style:!0}),y(t).forEach(c),this.h()},h(){v(t,"class","block svelte-a464ra"),me(t,"background-color",e[2]===0?"gray":e[1][e[16].cat][0]),this.first=t},m(l,o){z(l,t,o),h=!0},p(l,o){e=l,(!h||o&7)&&me(t,"background-color",e[2]===0?"gray":e[1][e[16].cat][0])},r(){p=t.getBoundingClientRect()},f(){Te(t),i(),Ue(t,p)},a(){i(),i=Pe(t,p,De,{})},i(l){h||(Me(()=>{u&&u.end(1),a=Oe(t,e[4],{key:e[16].id}),a.start()}),h=!0)},o(l){a&&a.invalidate(),u=Ve(t,e[3],{key:e[16].id}),h=!1},d(l){l&&c(t),l&&u&&u.end()}}}function dt(r,e){let t,a,u,p,i=fe,h;return{key:r,first:null,c(){t=S("div"),this.h()},l(l){t=F(l,"DIV",{style:!0,class:!0}),y(t).forEach(c),this.h()},h(){me(t,"transform","translate("+(50+e[15]*50)+"px,"+(120-e[18]*21)+"px)"),me(t,"background-color",e[1][e[16].cat][0]),v(t,"class","block lower svelte-a464ra"),this.first=t},m(l,o){z(l,t,o),h=!0},p(l,o){e=l,(!h||o&1)&&me(t,"transform","translate("+(50+e[15]*50)+"px,"+(120-e[18]*21)+"px)"),(!h||o&3)&&me(t,"background-color",e[1][e[16].cat][0])},r(){p=t.getBoundingClientRect()},f(){Te(t),i(),Ue(t,p)},a(){i(),i=Pe(t,p,De,{})},i(l){h||(Me(()=>{u&&u.end(1),a=Oe(t,e[4],{key:e[16].id}),a.start()}),h=!0)},o(l){a&&a.invalidate(),u=Ve(t,e[3],{key:e[16].id}),h=!1},d(l){l&&c(t),l&&u&&u.end()}}}function pt(r){let e=[],t=new Map,a,u;function p(...l){return r[11](r[13],...l)}let i=r[0].bars.filter(p);const h=l=>l[16].id;for(let l=0;l<i.length;l+=1){let o=ct(r,i,l),d=h(o);t.set(d,e[l]=dt(d,o))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();a=Se()},l(l){for(let o=0;o<e.length;o+=1)e[o].l(l);a=Se()},m(l,o){for(let d=0;d<e.length;d+=1)e[d].m(l,o);z(l,a,o),u=!0},p(l,o){if(r=l,o&3){i=r[0].bars.filter(p),we();for(let d=0;d<e.length;d+=1)e[d].r();e=Fe(e,o,h,1,r,i,t,a.parentNode,qe,dt,a,ct);for(let d=0;d<e.length;d+=1)e[d].a();ke()}},i(l){if(!u){for(let o=0;o<i.length;o+=1)se(e[o]);u=!0}},o(l){for(let o=0;o<e.length;o+=1)ue(e[o]);u=!1},d(l){for(let o=0;o<e.length;o+=1)e[o].d(l);l&&c(a)}}}function Kt(r){let e,t,a,u,p,i,h,l,o,d,_,s,f,m,N,B,T,G,Z,W,A,q=r[5][r[2]]+"",ee,C,H=[],Y=new Map,J,X,Q,te,g,k,R,K,L=r[0].blocks;const le=I=>I[16].id;for(let I=0;I<L.length;I+=1){let b=ut(r,L,I),E=le(b);Y.set(E,H[I]=ft(E,b))}let O=["apple","banana","cherry","pear"],w=[];for(let I=0;I<4;I+=1)w[I]=pt(ht(r,O,I));const j=I=>ue(w[I],1,1,()=>{w[I]=null});return{c(){e=S("div"),t=S("button"),a=P("Stage 0 of reveal"),u=U(),p=S("button"),i=P("Stage 1"),h=U(),l=S("button"),o=P("Stage 2"),d=U(),_=S("button"),s=P("Stage 3"),f=U(),m=S("button"),N=P("Reset"),B=U(),T=S("p"),G=P("Story (stage "),Z=P(r[2]),W=P("): "),A=new Nt,ee=U(),C=S("div");for(let I=0;I<H.length;I+=1)H[I].c();J=U(),X=S("br"),Q=S("br"),te=U(),g=S("div");for(let I=0;I<4;I+=1)w[I].c();this.h()},l(I){e=F(I,"DIV",{class:!0});var b=y(e);t=F(b,"BUTTON",{});var E=y(t);a=D(E,"Stage 0 of reveal"),E.forEach(c),u=M(b),p=F(b,"BUTTON",{});var re=y(p);i=D(re,"Stage 1"),re.forEach(c),h=M(b),l=F(b,"BUTTON",{});var he=y(l);o=D(he,"Stage 2"),he.forEach(c),d=M(b),_=F(b,"BUTTON",{});var ne=y(_);s=D(ne,"Stage 3"),ne.forEach(c),f=M(b),m=F(b,"BUTTON",{});var ce=y(m);N=D(ce,"Reset"),ce.forEach(c),B=M(b),T=F(b,"P",{class:!0});var ae=y(T);G=D(ae,"Story (stage "),Z=D(ae,r[2]),W=D(ae,"): "),A=Ct(ae),ae.forEach(c),ee=M(b),C=F(b,"DIV",{class:!0});var $=y(C);for(let x=0;x<H.length;x+=1)H[x].l($);$.forEach(c),J=M(b),X=F(b,"BR",{}),Q=F(b,"BR",{}),te=M(b),g=F(b,"DIV",{class:!0});var V=y(g);for(let x=0;x<4;x+=1)w[x].l(V);V.forEach(c),b.forEach(c),this.h()},h(){A.a=null,v(T,"class","commentary svelte-a464ra"),v(C,"class","intial-grid top  svelte-a464ra"),v(g,"class","intial-grid lower  svelte-a464ra"),v(e,"class","wrapper svelte-a464ra")},m(I,b){z(I,e,b),n(e,t),n(t,a),n(e,u),n(e,p),n(p,i),n(e,h),n(e,l),n(l,o),n(e,d),n(e,_),n(_,s),n(e,f),n(e,m),n(m,N),n(e,B),n(e,T),n(T,G),n(T,Z),n(T,W),A.m(q,T),n(e,ee),n(e,C);for(let E=0;E<H.length;E+=1)H[E].m(C,null);n(e,J),n(e,X),n(e,Q),n(e,te),n(e,g);for(let E=0;E<4;E+=1)w[E].m(g,null);k=!0,R||(K=[ie(t,"click",r[9]),ie(p,"click",r[10]),ie(l,"click",r[6]),ie(_,"click",r[7]),ie(m,"click",r[8])],R=!0)},p(I,[b]){if((!k||b&4)&&ge(Z,I[2]),(!k||b&4)&&q!==(q=I[5][I[2]]+"")&&A.p(q),b&7){L=I[0].blocks,we();for(let E=0;E<H.length;E+=1)H[E].r();H=Fe(H,b,le,1,I,L,Y,C,qe,ft,null,ut);for(let E=0;E<H.length;E+=1)H[E].a();ke()}if(b&3){O=["apple","banana","cherry","pear"];let E;for(E=0;E<4;E+=1){const re=ht(I,O,E);w[E]?(w[E].p(re,b),se(w[E],1)):(w[E]=pt(re),w[E].c(),se(w[E],1),w[E].m(g,null))}for(we(),E=4;E<4;E+=1)j(E);ke()}},i(I){if(!k){for(let b=0;b<L.length;b+=1)se(H[b]);for(let b=0;b<4;b+=1)se(w[b]);k=!0}},o(I){for(let b=0;b<H.length;b+=1)ue(H[b]);w=w.filter(Boolean);for(let b=0;b<4;b+=1)ue(w[b]);k=!1},d(I){I&&c(e);for(let b=0;b<H.length;b+=1)H[b].d();Ne(w,I),R=!1,Ce(K)}}}function $t(r,e,t){const[a,u]=Ut({});let p={0:"'16 students were asked what their favourite fruit is, each square represents a student'",1:"Here is how they voted for either <span style='color:#8DB600'>apple</span>, <span style='color:#FFE135'>banana</span>, <span style='color:#D2042D'>cherry</span>, or <span style='color:#9F6D2E'>pear</span>.",2:"We can re-arrange the data to spot patterns, but would it be nicer in a chart?",3:"Smooth transition into the barchart"},i={blocks:[{id:0,cat:"apple"},{id:3,cat:"apple"},{id:13,cat:"cherry"},{id:4,cat:"apple"},{id:5,cat:"banana"},{id:6,cat:"pear"},{id:12,cat:"cherry"},{id:7,cat:"pear"},{id:2,cat:"apple"},{id:9,cat:"cherry"},{id:10,cat:"cherry"},{id:11,cat:"banana"},{id:1,cat:"apple"},{id:14,cat:"cherry"},{id:8,cat:"pear"},{id:15,cat:"cherry"}],bars:[]},h={cherry:["#D2042D",50],apple:["#8DB600",100],banana:["#FFE135",150],pear:["#9F6D2E",200]},l=0;function o(){t(2,l=2),t(0,i.blocks=i.blocks.sort((B,T)=>B.cat>T.cat?1:T.cat>B.cat?-1:0),i)}function d(B,T){let G=B[0];return t(1,h[G.cat][2]+=1,h),T.push(G),[B.filter(Z=>Z!==G),T]}async function _(){t(2,l=3);const B=T=>new Promise(G=>setTimeout(G,T));for(let T=0;T<16;T++)t(0,[i.blocks,i.bars]=d(i.blocks,i.bars),i),await B(150)}function s(){t(2,l=0),t(0,i={blocks:[{id:0,cat:"apple"},{id:3,cat:"apple"},{id:13,cat:"cherry"},{id:4,cat:"apple"},{id:5,cat:"banana"},{id:6,cat:"pear"},{id:12,cat:"cherry"},{id:7,cat:"pear"},{id:2,cat:"apple"},{id:9,cat:"cherry"},{id:10,cat:"cherry"},{id:11,cat:"banana"},{id:1,cat:"apple"},{id:14,cat:"cherry"},{id:8,cat:"pear"},{id:15,cat:"cherry"}],bars:[]})}return[i,h,l,a,u,p,o,_,s,()=>t(2,l=0),()=>t(2,l=1),(B,T)=>T.cat==B]}class xt extends ve{constructor(e){super();be(this,e,$t,Kt,ye,{})}}function mt(r,e,t){const a=r.slice();return a[18]=e[t],a[20]=t,a}function _t(r,e){let t,a,u,p,i,h,l,o,d,_=fe,s;return{key:r,first:null,c(){t=de("rect"),this.h()},l(f){t=pe(f,"rect",{x:!0,y:!0,height:!0,width:!0,fill:!0,opacity:!0}),y(t).forEach(c),this.h()},h(){v(t,"x",a=oe+e[4](e[18].cat)),v(t,"y",u=e[3]+oe-e[18].value),v(t,"height",p=e[18].value),v(t,"width",i=e[4].bandwidth()),v(t,"fill",h=e[18].color),v(t,"opacity","0.5"),this.first=t},m(f,m){z(f,t,m),s=!0},p(f,m){e=f,(!s||m&20&&a!==(a=oe+e[4](e[18].cat)))&&v(t,"x",a),(!s||m&12&&u!==(u=e[3]+oe-e[18].value))&&v(t,"y",u),(!s||m&4&&p!==(p=e[18].value))&&v(t,"height",p),(!s||m&16&&i!==(i=e[4].bandwidth()))&&v(t,"width",i),(!s||m&4&&h!==(h=e[18].color))&&v(t,"fill",h)},r(){d=t.getBoundingClientRect()},f(){Te(t),_(),Ue(t,d)},a(){_(),_=Pe(t,d,De,{duration:300})},i(f){s||(Me(()=>{o&&o.end(1),l=Oe(t,xe,{y:200,duration:300,delay:200}),l.start()}),s=!0)},o(f){l&&l.invalidate(),o=Ve(t,xe,{y:200,duration:300}),s=!1},d(f){f&&c(t),f&&o&&o.end()}}}function el(r){let e,t,a=r[6]?"Z->A":"A->Z",u,p,i,h,l=r[7]?"(Desc)":"(Asc)",o,d,_,s,f,m,N,B,T,G,Z,W,A,q,ee,C=[],H=new Map,Y,J,X,Q=r[2];const te=g=>g[18];for(let g=0;g<Q.length;g+=1){let k=mt(r,Q,g),R=te(k);H.set(R,C[g]=_t(R,k))}return{c(){e=S("button"),t=P("Sort "),u=P(a),p=U(),i=S("button"),h=P("Sort by Count "),o=P(l),d=U(),_=S("button"),s=P("Add data"),f=U(),m=S("button"),N=P("Reset"),B=U(),T=de("svg"),G=de("g"),W=de("g"),A=de("text"),q=P(`Fruit sold items)\r
  `);for(let g=0;g<C.length;g+=1)C[g].c();this.h()},l(g){e=F(g,"BUTTON",{});var k=y(e);t=D(k,"Sort "),u=D(k,a),k.forEach(c),p=M(g),i=F(g,"BUTTON",{});var R=y(i);h=D(R,"Sort by Count "),o=D(R,l),R.forEach(c),d=M(g),_=F(g,"BUTTON",{});var K=y(_);s=D(K,"Add data"),K.forEach(c),f=M(g),m=F(g,"BUTTON",{});var L=y(m);N=D(L,"Reset"),L.forEach(c),B=M(g),T=pe(g,"svg",{width:!0,height:!0});var le=y(T);G=pe(le,"g",{class:!0,transform:!0}),y(G).forEach(c),W=pe(le,"g",{class:!0,transform:!0}),y(W).forEach(c),A=pe(le,"text",{class:!0,y:!0,x:!0,transform:!0});var O=y(A);q=D(O,`Fruit sold items)\r
  `),O.forEach(c);for(let w=0;w<C.length;w+=1)C[w].l(le);le.forEach(c),this.h()},h(){_.disabled=r[5],v(G,"class","xAxis"),v(G,"transform",Z="translate("+oe+","+(oe+r[3])+")"),v(W,"class","yAxis"),v(W,"transform","translate("+oe+","+oe+")"),v(A,"class","axis-label svelte-bjdikv"),v(A,"y",12),v(A,"x",ee=-r[3]*.9),v(A,"transform","rotate(270)"),v(T,"width",Tt),v(T,"height",Ft)},m(g,k){z(g,e,k),n(e,t),n(e,u),z(g,p,k),z(g,i,k),n(i,h),n(i,o),z(g,d,k),z(g,_,k),n(_,s),z(g,f,k),z(g,m,k),n(m,N),z(g,B,k),z(g,T,k),n(T,G),r[15](G),n(T,W),r[16](W),n(T,A),n(A,q);for(let R=0;R<C.length;R+=1)C[R].m(T,null);Y=!0,J||(X=[ie(e,"click",r[8]),ie(i,"click",r[9]),ie(_,"click",r[10]),ie(m,"click",r[11])],J=!0)},p(g,[k]){if((!Y||k&64)&&a!==(a=g[6]?"Z->A":"A->Z")&&ge(u,a),(!Y||k&128)&&l!==(l=g[7]?"(Desc)":"(Asc)")&&ge(o,l),(!Y||k&32)&&(_.disabled=g[5]),(!Y||k&8&&Z!==(Z="translate("+oe+","+(oe+g[3])+")"))&&v(G,"transform",Z),(!Y||k&8&&ee!==(ee=-g[3]*.9))&&v(A,"x",ee),k&28){Q=g[2],we();for(let R=0;R<C.length;R+=1)C[R].r();C=Fe(C,k,te,1,g,Q,H,T,qe,_t,null,mt);for(let R=0;R<C.length;R+=1)C[R].a();ke()}},i(g){if(!Y){for(let k=0;k<Q.length;k+=1)se(C[k]);Y=!0}},o(g){for(let k=0;k<C.length;k+=1)ue(C[k]);Y=!1},d(g){g&&c(e),g&&c(p),g&&c(i),g&&c(d),g&&c(_),g&&c(f),g&&c(m),g&&c(B),g&&c(T),r[15](null),r[16](null);for(let k=0;k<C.length;k+=1)C[k].d();J=!1,Ce(X)}}}let oe=40,Ft=300,Tt=400;function tl(r,e,t){let a,u,p,i,h,l,o,d=!1,_={cat:"Strawberry",value:130,color:"pink"},s=[{cat:"Apple",value:50,color:"#8DB600"},{cat:"Banana",value:100,color:"#FFE135"},{cat:"Cherry",value:150,color:"#D2042D"},{cat:"Pear",value:40,color:"#9F6D2E"}],f=!0;function m(){f?(t(2,s=s.sort((A,q)=>A.cat<q.cat?1:q.cat<A.cat?-1:0)),t(6,f=!f)):(t(2,s=s.sort((A,q)=>A.cat>q.cat?1:q.cat>A.cat?-1:0)),t(6,f=!f))}let N=!0;function B(){N?(t(2,s=s.sort((A,q)=>A.value<q.value?1:q.value<A.value?-1:0)),t(7,N=!N)):(t(2,s=s.sort((A,q)=>A.value>q.value?1:q.value>A.value?-1:0)),t(7,N=!N))}function T(){t(5,d=!0),s.push(_),t(2,s)}function G(){t(5,d=!1),t(2,s=s.filter(A=>A!==_))}function Z(A){Be[A?"unshift":"push"](()=>{l=A,t(0,l)})}function W(A){Be[A?"unshift":"push"](()=>{o=A,t(1,o)})}return r.$$.update=()=>{r.$$.dirty&4&&t(14,p=s.map(function(A){return A.cat})),r.$$.dirty&24576&&t(4,i=gt().domain(p).range([0,u]).padding([.5])),r.$$.dirty&8&&t(12,h=vt().domain([0,200]).range([a,0])),r.$$.dirty&12319&&s&&(Le(l).call(bt(i).ticks(u/60)),Le(o).call(Mt(h).ticks(a/60)))},t(3,a=Ft-oe*2),t(13,u=Tt-oe*2),[l,o,s,a,i,d,f,N,m,B,T,G,h,u,p,Z,W]}class ll extends ve{constructor(e){super();be(this,e,tl,el,ye,{})}}let Ae=[{primary_key:"Scrollytelling",published:"2022-04-11",post_title:"Scrollytelling with Svelte",thumbnail:"/images/thumbnails/scrollytelling.png",keywords:["svelte","scrollytelling","animation"],intro_text:"A few interesting techniques to liven up your Svelte Scrollytelling pieces. ",component:zt},{primary_key:"Flip",published:"2022-04-12",post_title:"Using Svelte FLIP for Visual Storytelling",thumbnail:"/images/thumbnails/flip.png",keywords:["svelte","FLIP","animation"],intro_text:"FLIP (First, Last, Invert, Play) is a cool feature of Svelte, let's explore cool ways to use it for visual storytelling and journalism.",component:Wt,components:[{id:"FlipGrid",title:"Grid manipulation with FLIP",notes:"This is the classic use case for FLIP. In the visual journalism space, sometimes we want to give the user the option to search through individual data points. With FLIP we can add a little bit cool to that process. <br/><br/> We add the animate:flip directive to the element in a Svelte {#each} block. <br/><br/>Then, when we sort or shuffle the source data, our cards (or whatever you are showing) are animated from their initial state to their end state.  ",component:Qt},{id:"FlipEntryBars",title:"Blocks to Bar Chart Animation with FLIP and Crossfade",notes:"Now things are getting interesting! In this example, I wanted to show how you could lead the user through a series of 'reveal' points. <br/><br/>The 'main event' transition is the one at stage 3; by combining FLIP and Crossfade (from 'svelte/transition'), we can 'send' and 'receive' data points to and from two lists. <br/> <br/> These two lists can be displayed in different ways: the 'blocks' list is displayed as simple blocks, and my 'bars' list is formatted to appear like a bar chart. <br/><br/>Note: things like axes/ labels/ keys have been removed to focus just on the FLIP animations. ",component:xt},{id:"FlipSortAxes",title:"Sorting Axes of a Chart",notes:"Here, we've given the user the ability to sort the X-axis, alphabetically, or by the values of the Y-axis. <br/><br/> The principles are the same. The key points are that we need to re-draw the axis upon data changes.<br/><br/> Note: a key design consideration here is whether you want the X-axis ticks to move with the bar, I chose not to in this instance as it could look a bit messy. To have the ticks and axis labels move with the bar you would need to re-draw the axis with HTML elements (rather than D3/ SVG). This would make it easier to animate (and style).",component:ll}]}];export{Ae as c};
